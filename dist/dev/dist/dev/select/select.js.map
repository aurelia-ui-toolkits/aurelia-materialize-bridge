{"version":3,"sources":["select/select.js"],"names":["bindable","customAttribute","BindingEngine","inject","TaskQueue","getLogger","fireEvent","getBooleanFromAttributeValue","DOM","MdSelect","Element","readonlyChanged","readonly","makeReadonly","$","element","siblings","refresh","bindingEngine","taskQueue","_suspendUpdate","subscriptions","input","dropdownMutationObserver","optionsMutationObserver","_taskqueueRunning","handleChangeFromViewModel","bind","handleChangeFromNativeSelect","handleBlur","log","handleFocus","attached","classList","contains","div","va","attributes","getNamedItem","attr","name","label","wrap","insertAfter","queueTask","createMaterialSelect","push","propertyObserver","subscribe","on","detached","$element","off","observeVisibleDropdownContent","observeOptions","data","remove","material_select","unwrap","forEach","sub","dispose","labelChanged","newValue","updateLabel","$label","parent","text","disabledChanged","toggleControl","showErrortextChanged","setErrorTextAttribute","parentElement","querySelector","debug","showErrortext","setAttribute","notifyBindingEngine","arguments","value","val","disable","$wrapper","length","addClass","removeClass","destroy","disabled","attach","createMutationObserver","isHidden","mutations","mutation","window","getComputedStyle","target","getPropertyValue","takeRecords","observe","attributeFilter","disconnect","enableOptionObserver","characterData","subtree","open","trigger"],"mappings":"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","file":"../../../select/select.js","sourcesContent":["import {bindable, customAttribute} from 'aurelia-templating';\r\nimport {BindingEngine} from 'aurelia-binding';\r\nimport {inject} from 'aurelia-dependency-injection';\r\nimport {TaskQueue} from 'aurelia-task-queue';\r\nimport {getLogger} from 'aurelia-logging';\r\nimport {fireEvent} from '../common/events';\r\nimport {getBooleanFromAttributeValue} from '../common/attributes';\r\nimport {DOM} from 'aurelia-pal';\r\n\r\n@inject(Element, BindingEngine, TaskQueue)\r\n@customAttribute('md-select')\r\nexport class MdSelect {\r\n  @bindable() disabled = false;\r\n\t@bindable() readonly = false;\r\n  readonlyChanged() {\r\n    if (this.readonly) {\r\n      this.makeReadonly($(this.element).siblings('input')[0]);\r\n    } else {\r\n      this.refresh();\r\n    }\r\n  }\r\n\r\n  @bindable() enableOptionObserver = false;\r\n  @bindable() label = '';\r\n  @bindable() showErrortext = true;\r\n  _suspendUpdate = false;\r\n  subscriptions = [];\r\n  input = null;\r\n  dropdownMutationObserver = null;\r\n  optionsMutationObserver = null;\r\n\r\n  constructor(element, bindingEngine, taskQueue) {\r\n    this.element = element;\r\n    this.taskQueue = taskQueue;\r\n    this.handleChangeFromViewModel = this.handleChangeFromViewModel.bind(this);\r\n    this.handleChangeFromNativeSelect = this.handleChangeFromNativeSelect.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.log = getLogger('md-select');\r\n    this.bindingEngine = bindingEngine;\r\n\r\n    this.handleFocus = this.handleFocus.bind(this);\r\n  }\r\n\r\n  attached() {\r\n    if (this.element.classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    let div = $('<div class=\"input-field\"></div>');\r\n    let va = this.element.attributes.getNamedItem('validate');\r\n    if (va) {\r\n      div.attr(va.name, va.label);\r\n    }\r\n\r\n    $(this.element).wrap(div);\r\n    if (this.label) {\r\n      $(`<label class=\"md-select-label\">${this.label}</label>`).insertAfter(this.element);\r\n    }\r\n\r\n    this.taskQueue.queueTask(() => {\r\n      this.createMaterialSelect(false);\r\n    });\r\n    this.subscriptions.push(this.bindingEngine.propertyObserver(this.element, 'value').subscribe(this.handleChangeFromViewModel));\r\n\r\n    $(this.element).on('change', this.handleChangeFromNativeSelect);\r\n  }\r\n\r\n  detached() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    let $element = $(this.element);\r\n    $element.off('change', this.handleChangeFromNativeSelect);\r\n    this.observeVisibleDropdownContent(false);\r\n    this.observeOptions(false);\r\n    this.dropdownMutationObserver = null;\r\n    $element.siblings(`ul#select-options-${$element.data('select-id')}`).remove();\r\n    $element.material_select('destroy');\r\n    $element.siblings('label').remove();\r\n    $element.siblings('.md-input-validation').remove();\r\n    $element.unwrap();\r\n    this.subscriptions.forEach(sub => sub.dispose());\r\n  }\r\n\r\n  refresh() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    this.taskQueue.queueTask(() => {\r\n      this.createMaterialSelect(true);\r\n    });\r\n  }\r\n\r\n  labelChanged(newValue) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    this.updateLabel();\r\n  }\r\n\r\n  updateLabel() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (this.label) {\r\n      const $label = $(this.element).parent('.select-wrapper').siblings('.md-select-label');\r\n      $label.text(this.label);\r\n    }\r\n  }\r\n\r\n  disabledChanged(newValue) {\r\n    this.toggleControl(newValue);\r\n  }\r\n\r\n  showErrortextChanged() {\r\n    this.setErrorTextAttribute();\r\n  }\r\n\r\n  setErrorTextAttribute() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    let input = this.element.parentElement.querySelector('input.select-dropdown');\r\n    if (!input) return;\r\n    this.log.debug('showErrortextChanged: ' + this.showErrortext);\r\n    input.setAttribute('data-show-errortext', getBooleanFromAttributeValue(this.showErrortext));\r\n  }\r\n\r\n  notifyBindingEngine() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    this.log.debug('selectedOptions changed', arguments);\r\n  }\r\n\r\n  handleChangeFromNativeSelect() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (!this._suspendUpdate) {\r\n      this.log.debug('handleChangeFromNativeSelect', this.element.value, $(this.element).val());\r\n      this._suspendUpdate = true;\r\n      fireEvent(this.element, 'change');\r\n      this._suspendUpdate = false;\r\n    }\r\n  }\r\n\r\n  handleChangeFromViewModel(newValue) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    this.log.debug('handleChangeFromViewModel', newValue, $(this.element).val());\r\n    if (!this._suspendUpdate) {\r\n      this.createMaterialSelect(false);\r\n    }\r\n  }\r\n\r\n  toggleControl(disable) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    let $wrapper = $(this.element).parent('.select-wrapper');\r\n    if ($wrapper.length > 0) {\r\n      if (disable) {\r\n        $('.caret', $wrapper).addClass('disabled');\r\n        $('input.select-dropdown', $wrapper).attr('disabled', 'disabled');\r\n        $wrapper.attr('disabled', 'disabled');\r\n      } else {\r\n        $('.caret', $wrapper).removeClass('disabled');\r\n        $('input.select-dropdown', $wrapper).attr('disabled', null);\r\n        $wrapper.attr('disabled', null);\r\n      }\r\n    }\r\n  }\r\n\r\n  createMaterialSelect(destroy) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    this.observeVisibleDropdownContent(false);\r\n    this.observeOptions(false);\r\n    if (destroy) {\r\n      $(this.element).material_select('destroy');\r\n    }\r\n    $(this.element).material_select();\r\n    this.toggleControl(this.disabled);\r\n    this.observeVisibleDropdownContent(true);\r\n    this.observeOptions(true);\r\n    this.setErrorTextAttribute();\r\n    if (this.readonly) {\r\n      this.makeReadonly(input[0]);\r\n    }\r\n  }\r\n\r\n  makeReadonly(input) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    $(input).off('click');\r\n    $(input).off('focus');\r\n    $(input).off('keydown');\r\n    $(input).off('open');\r\n  }\r\n\r\n  observeVisibleDropdownContent(attach) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (attach) {\r\n      if (!this.dropdownMutationObserver) {\r\n        this.dropdownMutationObserver = DOM.createMutationObserver(mutations => {\r\n          let isHidden = false;\r\n          for (let mutation of mutations) {\r\n            if (window.getComputedStyle(mutation.target).getPropertyValue('display') === 'none') {\r\n              isHidden = true;\r\n            }\r\n          }\r\n          if (isHidden) {\r\n            this.dropdownMutationObserver.takeRecords();\r\n            this.handleBlur();\r\n          } else {\r\n            this.handleFocus();\r\n          }\r\n        });\r\n      }\r\n      this.dropdownMutationObserver.observe(this.element.parentElement.querySelector('.dropdown-content'), {\r\n        attributes: true,\r\n        attributeFilter: ['style']\r\n      });\r\n    } else {\r\n      if (this.dropdownMutationObserver) {\r\n        this.dropdownMutationObserver.disconnect();\r\n        this.dropdownMutationObserver.takeRecords();\r\n      }\r\n    }\r\n  }\r\n\r\n  observeOptions(attach) {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (getBooleanFromAttributeValue(this.enableOptionObserver)) {\r\n      if (attach) {\r\n        if (!this.optionsMutationObserver) {\r\n          this.optionsMutationObserver = DOM.createMutationObserver(mutations => {\r\n            // this.log.debug('observeOptions', mutations);\r\n            this.refresh();\r\n          });\r\n        }\r\n        this.optionsMutationObserver.observe(this.element, {\r\n          // childList: true,\r\n          characterData: true,\r\n          subtree: true\r\n        });\r\n      } else {\r\n        if (this.optionsMutationObserver) {\r\n          this.optionsMutationObserver.disconnect();\r\n          this.optionsMutationObserver.takeRecords();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  open() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    $(this.element).siblings('input.select-dropdown').trigger('focus');\r\n  }\r\n\r\n  //\r\n  // Firefox sometimes fire blur several times in a row\r\n  // observable at http://localhost:3000/#/samples/select/\r\n  // when enable 'Disable Functionality', open that list and\r\n  // then open 'Basic use' list.\r\n  // Chrome - ok\r\n  // IE 11 - ok\r\n  // Edge ?\r\n  //\r\n  _taskqueueRunning = false;\r\n\r\n  handleBlur() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (this._taskqueueRunning) return;\r\n    this._taskqueueRunning = true;\r\n    this.taskQueue.queueTask(() => {\r\n      this.log.debug('fire blur event');\r\n      fireEvent(this.element, 'blur');\r\n      this._taskqueueRunning = false;\r\n\r\n      if (this.label) {\r\n        const $label = $(this.element).parent('.select-wrapper').siblings('.md-select-label');\r\n        $label.removeClass('md-focused');\r\n      }\r\n    });\r\n  }\r\n\r\n  handleFocus() {\r\n    if ((this.element).classList.contains('browser-default')) {\r\n      return;\r\n    }\r\n    if (this.label) {\r\n      const $label = $(this.element).parent('.select-wrapper').siblings('.md-select-label');\r\n      $label.addClass('md-focused');\r\n    }\r\n  }\r\n}\r\n"]}